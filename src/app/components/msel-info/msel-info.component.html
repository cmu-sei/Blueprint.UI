<!--
Copyright 2022 Carnegie Mellon University. All Rights Reserved.
 Released under a MIT (SEI)-style license, please see LICENSE.md in the project root for license information or contact permission@sei.cmu.edu for full terms.
-->
<div *ngIf="msel" class="scrolling-region">
  <div class="scenario-event-detail" (click)="$event.stopPropagation();">
    <div class="edit-buttons">
      <span>
        <button
          mat-icon-button
          (click)="isEditEnabled = true; $event.stopPropagation()"
          style="outline: none;"
          title="Enable Editing"
          *ngIf="!isEditEnabled && (isContentDeveloper || msel.hasRole(loggedInUserId, null).owner)"
        >
          <mat-icon class="mdi-24px self-center" fontIcon="mdi-square-edit-outline"></mat-icon>
        </button>
        <button
          mat-icon-button
          (click)="saveChanges(); $event.stopPropagation()"
          style="outline: none;"
          title="Save Changes"
          *ngIf="isEditEnabled"
        >
          <mat-icon class="mdi-24px self-center" fontIcon="mdi-check"></mat-icon>
        </button>
        <button
          mat-icon-button
          (click)="cancelChanges(); $event.stopPropagation()"
          style="outline: none;"
          title="Cancel Changes"
          *ngIf="isEditEnabled"
        >
          <mat-icon class="mdi-24px self-center" fontIcon="mdi-close"></mat-icon>
        </button>
      </span>
    </div>
    <div class="single-detail">
      <mat-form-field class="full-width">
        <input
          type="text"
          matInput
          placeholder="Name"
          [(ngModel)]="msel.name"
          [disabled]="!isEditEnabled"
        />
      </mat-form-field>
    </div>
    <div class="single-detail">
      <mat-form-field class="full-width">
        <input
          type="text"
          matInput
          placeholder="Description"
          [(ngModel)]="msel.description"
          [disabled]="!isEditEnabled"
        />
      </mat-form-field>
    </div>
    <div class="single-detail">
      <mat-checkbox [disabled]="!isEditEnabled" [(ngModel)]="msel.isTemplate">Is a Template</mat-checkbox>
    </div>
    <div *ngIf="!msel.isTemplate" class="single-detail">
      <mat-checkbox [disabled]="!isEditEnabled" [(ngModel)]="msel.useGallery">Integrate Gallery</mat-checkbox>
    </div>
    <div class="sub-detail bottom-space">
      <button
        (click)="pushToGallery()"
        title="push to Gallery"
        *ngIf="!msel.galleryCollectionId"
        [disabled]="!(isContentDeveloper || msel.hasRole(loggedInUserId, null).owner)"
      >Push to Gallery</button>
      <button
        (click)="pullFromGallery()"
        title="Remove from Gallery"
        *ngIf="!!msel.galleryCollectionId"
        [disabled]="!(isContentDeveloper || msel.hasRole(loggedInUserId, null).owner)"
      >Remove from Gallery</button>
    </div>
    <div class="sub-detail">
      <mat-form-field *ngIf="msel.useGallery && msel.galleryCollectionId" class="full-width">
        <input
          type="text"
          matInput
          placeholder="Collection"
          [(ngModel)]="msel.galleryCollectionId"
          disabled
        />
      </mat-form-field>
    </div>
    <div class="sub-detail">
      <mat-form-field *ngIf="msel.useGallery && msel.galleryExhibitId" class="full-width">
        <input
          type="text"
          matInput
          placeholder="Exhibit"
          [(ngModel)]="msel.galleryExhibitId"
          disabled
        />
      </mat-form-field>
    </div>
    <div *ngIf="!msel.isTemplate" class="single-detail">
      <mat-checkbox [disabled]="!isEditEnabled" [(ngModel)]="msel.useCite">Integrate CITE</mat-checkbox>
    </div>
    <div class="sub-detail">
      <mat-form-field *ngIf="msel.useCite" class="full-width">
        <input
          type="text"
          matInput
          placeholder="Evaluation"
          [(ngModel)]="msel.citeEvaluationId"
          [disabled]="!isEditEnabled"
        />
      </mat-form-field>
    </div>
    <div *ngIf="!msel.isTemplate" class="single-detail">
      <mat-checkbox [disabled]="!isEditEnabled" [(ngModel)]="msel.useSteamfitter">Integrate Steamfitter</mat-checkbox>
    </div>
    <div class="sub-detail">
      <mat-form-field *ngIf="msel.useSteamfitter" class="full-width">
        <input
          type="text"
          matInput
          placeholder="Scenario"
          [(ngModel)]="msel.steamfitterScenarioId"
          [disabled]="!isEditEnabled"
        />
      </mat-form-field>
    </div>
    <div class="single-detail">
      <mat-form-field class="full-width">
        <input
          type="text"
          matInput
          placeholder="Status"
          [(ngModel)]="msel.status"
          [disabled]="!isEditEnabled"
        />
      </mat-form-field>
    </div>
    <div
      class="single-detail"
      *ngIf="isContentDeveloper || msel.hasRole(loggedInUserId, null).owner"
    >
      <mat-form-field class="full-width">
        <input
          type="text"
          matInput
          placeholder="Header Row Metadata (Height)"
          [(ngModel)]="msel.headerRowMetadata"
          [disabled]="!isEditEnabled"
        />
      </mat-form-field>
    </div>
    <div class="single-detail">
      <mat-form-field class="full-width">
        <input
          type="text"
          matInput
          placeholder="Date Created"
          value="{{ msel.dateCreated | date: 'MM/dd/yyyy' }}"
          disabled
        />
      </mat-form-field>
    </div>
    <div class="single-detail">
      <mat-form-field class="full-width">
        <input
          type="text"
          matInput
          placeholder="Created By"
          value="{{ getUserName(msel.createdBy) }}"
          disabled
        />
      </mat-form-field>
    </div>
  </div>
</div>
