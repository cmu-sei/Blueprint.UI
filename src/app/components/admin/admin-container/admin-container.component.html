<!--
Copyright 2022 Carnegie Mellon University. All Rights Reserved.
Released under a MIT (SEI)-style license, please see LICENSE.md in the
project root for license information or contact permission@sei.cmu.edu for full terms.
-->

<div class="background text app-admin-container">
  <app-topbar
    *ngIf="!hideTopbar"
    [title]="topbarText"
    [topbarView]="TopbarView.STEAMFITTER_ADMIN"
    [topbarColor]="topbarColor"
    [topbarTextColor]="topbarTextColor"
    [imageFilePath]="topbarImage"
    (urlNavigate)="goToUrl($event)"
  ></app-topbar>

  <mat-sidenav-container class="tall" autosize>
    <mat-sidenav
      class="appbarmenu-container background"
      #sidenav
      mode="side"
      [(opened)]="isSidebarOpen"
    >
      <mat-list>
        <mat-list-item class="appslist" title="Exit Administration">
          <button
            aria-label="Exit Administration"
            mat-icon-button
            (click)="goToUrl('/')"
            style="outline: none"
          >
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-close-circle-outline"
            ></mat-icon>
          </button>
          <a class="nolink" (click)="goToUrl('/')">
            <div class="cssLayoutRowCenterCenter">
              <h2 class="icon-text">Administration</h2>
            </div>
          </a>
          <mat-divider></mat-divider>
        </mat-list-item>
        <mat-list-item
          *ngIf="isSuperUser"
          class="showhand highlight"
          [ngClass]="getSelectedClass(teamsText)"
          id="wrapper"
          (click)="gotoSection(teamsText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-account-multiple"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="teamsText" class="application-name">
            {{ teamsText }}
          </div>

          <div>
            <button aria-labelledby="teamsText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-list-item
          *ngIf="isSuperUser"
          class="showhand highlight"
          [ngClass]="getSelectedClass(usersText)"
          id="wrapper"
          (click)="gotoSection(usersText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-account"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="usersText" class="application-name">
            {{ usersText }}
          </div>

          <div>
            <button aria-labelledby="usersText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-list-item
          class="showhand highlight"
          [ngClass]="getSelectedClass(dataFieldsText)"
          id="wrapper"
          (click)="gotoSection(dataFieldsText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-account"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="dataFieldsText" class="application-name">
            {{ dataFieldsText }}
          </div>

          <div>
            <button aria-labelledby="dataFieldsText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-list-item
          class="showhand highlight"
          [ngClass]="getSelectedClass(organizationsText)"
          id="wrapper"
          (click)="gotoSection(organizationsText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-bank"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="organizationsText" class="application-name">
            {{ organizationsText }}
          </div>

          <div>
            <button aria-labelledby="organizationsText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-list-item
          class="showhand highlight"
          [ngClass]="getSelectedClass(galleryCardsText)"
          id="wrapper"
          (click)="gotoSection(galleryCardsText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-account"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="galleryCardsText" class="application-name">
            {{ galleryCardsText }}
          </div>

          <div>
            <button aria-labelledby="galleryCardsText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-list-item
          class="showhand highlight"
          [ngClass]="getSelectedClass(citeActionsText)"
          id="wrapper"
          (click)="gotoSection(citeActionsText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-account"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="citeActionsText" class="application-name">
            {{ citeActionsText }}
          </div>

          <div>
            <button aria-labelledby="citeActionsText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
        <mat-list-item
          class="showhand highlight"
          [ngClass]="getSelectedClass(citeRolesText)"
          id="wrapper"
          (click)="gotoSection(citeRolesText)"
        >
          <div class="lefticon">
            <mat-icon
              class="mdi-24px"
              fontIcon="mdi-account"
              [ngStyle]="{ color: topbarColor }"
            ></mat-icon>
          </div>

          <div id="citeRolesText" class="application-name">
            {{ citeRolesText }}
          </div>

          <div>
            <button aria-labelledby="citeRolesText" mat-icon-button>
              <mat-icon
                class="icon-color"
                fontIcon="mdi-chevron-right"
              ></mat-icon>
            </button>
          </div>
        </mat-list-item>
      </mat-list>
      <div class="app-versions" style="margin-bottom: 58px;" *ngIf="!hideTopbar">
        Versions: UI {{ uiVersion }},  API {{ apiVersion }}
      </div>
      <div class="app-versions" *ngIf="hideTopbar">
        Versions: UI {{ uiVersion }},  API {{ apiVersion }}
      </div>
      <img
        class="cmu-logo"
        [src]="
          (theme$ | async) === 'light-theme'
            ? '/assets/img/cmu-red-gray.png'
            : '/assets/img/sei-logo-gray.png'
        "
      />
    </mat-sidenav>
    <mat-sidenav-content>
      <span *ngIf="isSuperUser && (selectedTab === teamsText)">
        <app-admin-teams></app-admin-teams>
      </span>
      <span *ngIf="isSuperUser && (selectedTab === usersText)">
        <app-admin-users></app-admin-users>
      </span>
      <span *ngIf="isSuperUser && (selectedTab === dataFieldsText)">
        data fields
      </span>
      <span *ngIf="isSuperUser && (selectedTab === organizationsText)">
        <app-organization-list
          [loggedInUserId]="(loggedInUser | async).profile.sub"
          [isContentDeveloper]="canAccessAdminSection"
          [showTemplates]="true"
        ></app-organization-list>
      </span>
      <span *ngIf="isSuperUser && (selectedTab === galleryCardsText)">
        gallery cards
      </span>
      <span *ngIf="isSuperUser && (selectedTab === citeActionsText)">
        cite actions
      </span>
      <span *ngIf="isSuperUser && (selectedTab === citeRolesText)">
        cite roles
      </span>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
